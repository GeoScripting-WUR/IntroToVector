<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <meta http-equiv="Content-Style-Type" content="text/css" />
  <meta name="generator" content="pandoc" />
  <meta name="author" content="Jan Verbesselt, Sytze de Bruyn, LoÃ¯c Dutrieux, Valerio Avitabile" />
  <title></title>
  <style type="text/css">code{white-space: pre;}</style>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- jQuery -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.10.3/jquery-ui.min.js"></script>
  
  <!-- bootstrap -->
  <!--<link href="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet"  id="style">-->
  <script src="https://netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"></script>
  
  <!-- highlight.js -->
  <!--<link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/default.min.css" rel="stylesheet" id="code-style">-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/highlight.min.js"></script>
  <script>
  hljs.LANGUAGES.r=function(a){var b="([a-zA-Z]|\\.[a-zA-Z.])[a-zA-Z0-9._]*";return{c:[a.HCM,{b:b,l:b,k:{keyword:"function if in break next repeat else for return switch while try tryCatch|10 stop warning require library attach detach source setMethod setGeneric setGroupGeneric setClass ...|10",literal:"NULL NA TRUE FALSE T F Inf NaN NA_integer_|10 NA_real_|10 NA_character_|10 NA_complex_|10"},r:0},{cN:"number",b:"0[xX][0-9a-fA-F]+[Li]?\\b",r:0},{cN:"number",b:"\\d+(?:[eE][+\\-]?\\d*)?L\\b",r:0},{cN:"number",b:"\\d+\\.(?!\\d)(?:i\\b)?",r:0},{cN:"number",b:"\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",r:0},{b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[a.BE],r:0},{cN:"string",b:"'",e:"'",c:[a.BE],r:0}]}}(hljs); </script>
  <!--<script type="text/javascript", src="https://yandex.st/highlightjs/7.3/languages/r.min.js"></script>-->
  
  <!-- Manific Popup -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/0.8.9/jquery.magnific-popup.min.js"></script>
  
  <script type="text/javascript"
    src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
  </script>
  <script defer="defer">
  // Function to generate the dynamic table of contents
  jQuery.fn.generate_TOC = function () {
    var base = $(this[0]);
  
    var selectors = ['h1', 'h2', 'h3', 'h4'];
  
    var last_ptr = [{}, {}, {}, {}];
  
    var anchors = {};
  
    generate_anchor = function (text) {
      var test = text.replace(/\W/g, '_');
  
      while(test in anchors){
        //if no suffix, add one
        if(test.match(/_\d+$/) === null){
          test = test + "_2";
        }
        //else generate unique id for duplicates by adding one to the suffix
        else {
          test = test.replace(/_(\d+)$/, function(match, number){ var num=+number+1; return("_" + num) });
        }
      }
      anchors[test]=1;
      return(test);
    }
  
    $(selectors.join(',')).filter(function(index) { return $(this).parent().attr("id") != 'header'; }).each(function () {
  
      var heading = $(this);
      var idx = selectors.indexOf(heading.prop('tagName').toLowerCase());
      var itr = 0;
  
      while (itr <= idx) {
        if (jQuery.isEmptyObject(last_ptr[itr])) {
          last_ptr[itr] = $('<ul>').addClass('nav');
          if (itr === 0) {
            base.append(last_ptr[itr])
          } else {
            if(last_ptr[itr-1].children('li').length === 0){
              last_ptr[itr-1].append(last_ptr[itr]);
            }
            else {
              last_ptr[itr - 1].children('li').last().append(last_ptr[itr]);
            }
          }
        }
        itr++;
      }
      var anchor = generate_anchor(heading.text());
      heading.attr('id', anchor);
      var a = $('<a>')
      .text(heading.text())
      .attr('href', '#' + anchor);
  
    var li = $('<li>')
      .append(a);
  
    last_ptr[idx].append(li);
    for (i = idx + 1; i < last_ptr.length; i++) {
      last_ptr[i] = {};
    }
    });
  }
  /* run scripts when document is ready */
  $(function() {
    "use strict";
  
    var $window = $(window);
    var $body = $(document.body);
  
    /* size of thumbnails */
  
    var hidden_types = ['source']
    var output_types = ['output', 'message', 'warning', 'error']
  
    /* style tables */
    $('table').addClass('table table-striped table-bordered table-hover table-condensed');
  
    $('pre code').each(function(i, e) {
      hljs.highlightBlock(e);
    });
  
    /* Magnific Popup */
    $(".thumbnail").each(function(){
      $(this).magnificPopup({
        disableOn: 768,
        closeOnContentClick: true,
  
        type: 'image',
        items: {
          src: $(this).find('img').attr('src'),
        }
      });
    });
  
    function toggle_block(obj, show) {
      var span = obj.find('span');
      if(show === true){
        span.removeClass('glyphicon-chevron-up').addClass('glyphicon-chevron-down');
        obj.next('pre').slideDown();
      }
      else {
        span.removeClass('glyphicon-chevron-down').addClass('glyphicon-chevron-up');
        obj.next('pre').slideUp();
      }
    }
  
    function toggle_thumbnails(imgs, show){
      if(show === true){
        imgs.parents().show()
        imgs.slideDown();
      }
      else {
        imgs.slideUp(400, function(){ $(this).parent().hide(); });
      }
    }
  
    function global_toggle(obj){
      var type = obj.attr('type');
      var show = !obj.parent('li').hasClass('active');
      if(show === true){
        obj.parent('li').addClass('active');
      }
      else{
        obj.parent('li').removeClass('active');
      }
      if(type == 'figure'){
        toggle_thumbnails($('.thumbnail img'), show);
      }
      else {
        $('.toggle.' + type).each(function() { toggle_block($(this), show); });
      }
    }
  
    /* onclick toggle next code block */
    $('.toggle').click(function() {
      var span = $(this).find('span');
      toggle_block($(this), !span.hasClass('glyphicon-chevron-down'));
      return false
    })
  
    // global toggles
    $('.toggle-global').click(function(){
      var type = $(this).attr('type');
      if(type === 'all-source'){
          $('li a.source').each(function() {
            global_toggle($(this));
          });
        }
      else if(type === 'all-output'){
        $.each(output_types, function(i, val){
          console.log(val);
          global_toggle($('li a.' + val));
        });
      }
      else {
        console.log($(this));
        global_toggle($(this));
      }
      return false;
    });
    /* table of contents */
    if($(['h1', 'h2', 'h3', 'h4'].join(',')).length > 0){
      $('body > #wrap > .container > .row').append('<div class="col-md-2"><div id="toc" class="well sidebar sidenav affix hidden-print"/></div>');
      $('#toc').generate_TOC();
    }
  
    $.each(hidden_types, function(i, type) {
      $('li[type=' + type + ']').each(function(){ global_toggle($(this)); });
    });
  
    /* remove paragraphs with no content */
    $('p:empty').remove();
  
    $body.scrollspy({
      target: '.sidebar',
    });
  
    /* theme switch */
    $('.theme-switch').click(function(){
      var css = $('link[title=' + $(this).attr('title') + ']');
      $('#theme[rel=stylesheet]').attr('href', css.attr('href'));
      $('.theme-switch').closest('li').removeClass('active');
      $(this).closest('li').addClass('active');
      return false;
    });
    /* code style switch */ //TODO use same function for both of these?
    $('.highlight-switch').click(function(){
      var css = $('link[title="' + $(this).attr('title') + '"]');
      $('#highlight[rel=stylesheet]').attr('href', css.attr('href'));
      $('.highlight-switch').closest('li').removeClass('active');
      $(this).closest('li').addClass('active');
      return false;
    });
  
    //TODO refresh on show/hide
    $window.on('load', function () {
      $body.scrollspy('refresh');
    })
  
  });
  
  </script>
  <style>
  /* Knitr_bootstrap styles */
  #header {
    display: none !important;
    visibility: hidden !important;
  }
  #wrap .container-fluid {
    padding: 0;
    overflow: hidden;
  }
  .toggle{
    text-transform: capitalize;
  }
  
  .toggle-global{
    text-transform: capitalize;
  }
  
  /* Sticky footer styles */
  * {
    margin:0;
  }
  html,
  body {
      height: 100%;
      padding:0 !important;
      /* The html and body elements cannot have any padding or margin. */
      /*overflow-x: hidden;*/
  }
  
  /* Wrapper for page content to push down footer */
  #wrap {
      min-height: 100%;
      height: auto !important;
      height: 100%;
      /* Negative indent footer by it's height */
      margin: 0 auto -120px;
  }
  
  /* Set the fixed height of the footer here */
  #push,
  #footer {
      height: 120px;
  }
  
  #footer {
    text-align: center;
  }
  
  /* Top level subheader elements.  These are the first nested items underneath a header element. */
  .header li {
    font-size: 20px;
  }
  
  /* Makes the font smaller for all subheader elements. */
  .sub-header li {
      font-size: 12px;
  }
  
  button.thumbnails {
    margin-left:0px;
  }
  
  /*
   * Side navigation
   *
   * Scrollspy and affixed enhanced navigation to highlight sections and secondary
   * sections of docs content.
   */
  
  /* By default it's not affixed in mobile views, so undo that */
  .sidebar.affix {
    position: static;
  }
  
  /* First level of nav */
  .sidenav {
    margin-top: 30px;
    margin-bottom: 30px;
    padding-top:    10px;
    padding-bottom: 10px;
    border-radius: 5px;
  }
  
  /* All levels of nav */
  .sidebar .nav > li > a {
    display: block;
    padding: 5px 20px;
  }
  .sidebar .nav > li > a:hover,
  .sidebar .nav > li > a:focus {
    text-decoration: none;
    border-right: 1px solid;
  }
  .sidebar .nav > .active > a,
  .sidebar .nav > .active:hover > a,
  .sidebar .nav > .active:focus > a {
    font-weight: bold;
    background-color: transparent;
    border-right: 1px solid;
  }
  
  /* Nav: second level (shown on .active) */
  .sidebar .nav .nav {
    display: none; /* Hide by default, but at >768px, show it */
    margin-bottom: 8px;
  }
  .sidebar .nav .nav > li > a {
    padding-top:    3px;
    padding-bottom: 3px;
    padding-left: 30px;
    font-size: 90%;
  }
  
  .sidebar .nav .nav .nav > li > a {
    padding-left: 40px;
  }
  .sidebar .nav .nav .nav .nav > li > a {
    padding-left: 50px;
  }
  
  /* Show and affix the side nav when space allows it */
  @media screen and (min-width: 992px) {
    .sidebar .nav > .active > ul {
      display: block;
    }
    /* Widen the fixed sidebar */
    .sidebar.affix,
    .sidebar.affix-bottom {
      width: 213px;
    }
    .sidebar.affix-top,
    .sidebar.affix {
      position: fixed; /* Undo the static from mobile first approach */
      top: 30px;
    }
    .sidebar.affix-bottom {
      position: absolute; /* Undo the static from mobile first approach */
    }
    .sidebar.affix-bottom .sidenav,
    .sidebar.affix .sidenav {
      margin-top: 0;
      margin-bottom: 0;
    }
  }
  @media screen and (min-width: 1200px) {
    /* Widen the fixed sidebar again */
    .sidebar.affix-bottom,
    .sidebar.affix {
      width: 263px;
    }
  }
  
  #toc {
    padding: 10px 0px;
    margin:0;
    border:0;
  }
  
  
  .panel pre {
    margin: 0;
    padding: 0;
    border: 0;
  }
  button + pre {
    margin: 0;
    padding: 0;
  }
  pre code {
    border-radius: 0;
  }
  /* Magnific Popup CSS */
  .mfp-bg {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1042;
    overflow: hidden;
    position: fixed;
    background: #0b0b0b;
    opacity: 0.8;
    filter: alpha(opacity=80); }
  
  .mfp-wrap {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 1043;
    position: fixed;
    outline: none !important;
    -webkit-backface-visibility: hidden; }
  
  .mfp-container {
    text-align: center;
    position: absolute;
    width: 100%;
    height: 100%;
    left: 0;
    top: 0;
    padding: 0 8px;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box; }
  
  .mfp-container:before {
    content: '';
    display: inline-block;
    height: 100%;
    vertical-align: middle; }
  
  .mfp-align-top .mfp-container:before {
    display: none; }
  
  .mfp-content {
    position: relative;
    display: inline-block;
    vertical-align: middle;
    margin: 0 auto;
    text-align: left;
    z-index: 1045; }
  
  .mfp-inline-holder .mfp-content,
  .mfp-ajax-holder .mfp-content {
    width: 100%;
    cursor: auto; }
  
  .mfp-ajax-cur {
    cursor: progress; }
  
  .mfp-zoom-out-cur,
  .mfp-zoom-out-cur .mfp-image-holder .mfp-close {
    cursor: -moz-zoom-out;
    cursor: -webkit-zoom-out;
    cursor: zoom-out; }
  
  .mfp-zoom {
    cursor: pointer;
    cursor: -webkit-zoom-in;
    cursor: -moz-zoom-in;
    cursor: zoom-in; }
  
  .mfp-auto-cursor .mfp-content {
    cursor: auto; }
  
  .mfp-close,
  .mfp-arrow,
  .mfp-preloader,
  .mfp-counter {
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none; }
  
  .mfp-loading.mfp-figure {
    display: none; }
  
  .mfp-hide {
    display: none !important; }
  
  .mfp-preloader {
    color: #cccccc;
    position: absolute;
    top: 50%;
    width: auto;
    text-align: center;
    margin-top: -0.8em;
    left: 8px;
    right: 8px;
    z-index: 1044; }
  
  .mfp-preloader a {
    color: #cccccc; }
  
  .mfp-preloader a:hover {
    color: white; }
  
  .mfp-s-ready .mfp-preloader {
    display: none; }
  
  .mfp-s-error .mfp-content {
    display: none; }
  
  button.mfp-close,
  button.mfp-arrow {
    overflow: visible;
    cursor: pointer;
    background: transparent;
    border: 0;
    -webkit-appearance: none;
    display: block;
    padding: 0;
    z-index: 1046;
    -webkit-box-shadow: none;
    box-shadow: none; }
  
  button::-moz-focus-inner {
    padding: 0;
    border: 0; }
  
  .mfp-close {
    width: 44px;
    height: 44px;
    line-height: 44px;
    position: absolute;
    right: 0;
    top: 0;
    text-decoration: none;
    text-align: center;
    opacity: 0.65;
    padding: 0 0 18px 10px;
    color: white;
    font-style: normal;
    font-size: 28px;
    font-family: Arial, Baskerville, monospace; }
    .mfp-close:hover, .mfp-close:focus {
      opacity: 1; }
    .mfp-close:active {
      top: 1px; }
  
  .mfp-close-btn-in .mfp-close {
    color: #333333; }
  
  .mfp-image-holder .mfp-close,
  .mfp-iframe-holder .mfp-close {
    color: white;
    right: -6px;
    text-align: right;
    padding-right: 6px;
    width: 100%; }
  
  .mfp-counter {
    position: absolute;
    top: 0;
    right: 0;
    color: #cccccc;
    font-size: 12px;
    line-height: 18px; }
  
  .mfp-arrow {
    position: absolute;
    opacity: 0.65;
    margin: 0;
    top: 50%;
    margin-top: -55px;
    padding: 0;
    width: 90px;
    height: 110px;
    -webkit-tap-highlight-color: rgba(0, 0, 0, 0); }
  
  .mfp-arrow:active {
    margin-top: -54px; }
  
  .mfp-arrow:hover,
  .mfp-arrow:focus {
    opacity: 1; }
  
  .mfp-arrow:before, .mfp-arrow:after,
  .mfp-arrow .mfp-b,
  .mfp-arrow .mfp-a {
    content: '';
    display: block;
    width: 0;
    height: 0;
    position: absolute;
    left: 0;
    top: 0;
    margin-top: 35px;
    margin-left: 35px;
    border: medium inset transparent; }
  .mfp-arrow:after,
  .mfp-arrow .mfp-a {
    border-top-width: 13px;
    border-bottom-width: 13px;
    top: 8px; }
  .mfp-arrow:before,
  .mfp-arrow .mfp-b {
    border-top-width: 21px;
    border-bottom-width: 21px; }
  
  .mfp-arrow-left {
    left: 0; }
    .mfp-arrow-left:after,
    .mfp-arrow-left .mfp-a {
      border-right: 17px solid white;
      margin-left: 31px; }
    .mfp-arrow-left:before,
    .mfp-arrow-left .mfp-b {
      margin-left: 25px;
      border-right: 27px solid #3f3f3f; }
  
  .mfp-arrow-right {
    right: 0; }
    .mfp-arrow-right:after,
    .mfp-arrow-right .mfp-a {
      border-left: 17px solid white;
      margin-left: 39px; }
    .mfp-arrow-right:before,
    .mfp-arrow-right .mfp-b {
      border-left: 27px solid #3f3f3f; }
  
  .mfp-iframe-holder {
    padding-top: 40px;
    padding-bottom: 40px; }
  
  .mfp-iframe-holder .mfp-content {
    line-height: 0;
    width: 100%;
    max-width: 900px; }
  
  .mfp-iframe-scaler {
    width: 100%;
    height: 0;
    overflow: hidden;
    padding-top: 56.25%; }
  
  .mfp-iframe-scaler iframe {
    position: absolute;
    display: block;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
    background: black; }
  
  .mfp-iframe-holder .mfp-close {
    top: -40px; }
  
  /* Main image in popup */
  img.mfp-img {
    width: auto;
    max-width: 100%;
    height: auto;
    display: block;
    line-height: 0;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;
    box-sizing: border-box;
    padding: 40px 0 40px;
    margin: 0 auto; }
  
  /* The shadow behind the image */
  .mfp-figure:after {
    content: '';
    position: absolute;
    left: 0;
    top: 40px;
    bottom: 40px;
    display: block;
    right: 0;
    width: auto;
    height: auto;
    z-index: -1;
    box-shadow: 0 0 8px rgba(0, 0, 0, 0.6);
    background: #444444; }
  
  .mfp-figure {
    line-height: 0; }
  
  .mfp-bottom-bar {
    margin-top: -36px;
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    cursor: auto; }
  
  .mfp-title {
    text-align: left;
    line-height: 18px;
    color: #f3f3f3;
    word-wrap: break-word;
    padding-right: 36px; }
  
  .mfp-figure small {
    color: #bdbdbd;
    display: block;
    font-size: 12px;
    line-height: 14px; }
  
  .mfp-image-holder .mfp-content {
    max-width: 100%; }
  
  .mfp-gallery .mfp-image-holder .mfp-figure {
    cursor: pointer; }
  
  @media screen and (max-width: 800px) and (orientation: landscape), screen and (max-height: 300px) {
    /**
     * Remove all paddings around the image on small screen
     */
    .mfp-img-mobile .mfp-image-holder {
      padding-left: 0;
      padding-right: 0; }
  
    .mfp-img-mobile img.mfp-img {
      padding: 0; }
  
    /* The shadow behind the image */
    .mfp-img-mobile .mfp-figure:after {
      top: 0;
      bottom: 0; }
  
    .mfp-img-mobile .mfp-bottom-bar {
      background: rgba(0, 0, 0, 0.6);
      bottom: 0;
      margin: 0;
      top: auto;
      padding: 3px 5px;
      position: fixed;
      -webkit-box-sizing: border-box;
      -moz-box-sizing: border-box;
      box-sizing: border-box; }
  
    .mfp-img-mobile .mfp-bottom-bar:empty {
      padding: 0; }
  
    .mfp-img-mobile .mfp-counter {
      right: 5px;
      top: 3px; }
  
    .mfp-img-mobile .mfp-close {
      top: 0;
      right: 0;
      width: 35px;
      height: 35px;
      line-height: 35px;
      background: rgba(0, 0, 0, 0.6);
      position: fixed;
      text-align: center;
      padding: 0; }
  
    .mfp-img-mobile .mfp-figure small {
      display: inline;
      margin-left: 5px; } }
  @media all and (max-width: 900px) {
    .mfp-arrow {
      -webkit-transform: scale(0.75);
      transform: scale(0.75); }
  
    .mfp-arrow-left {
      -webkit-transform-origin: 0;
      transform-origin: 0; }
  
    .mfp-arrow-right {
      -webkit-transform-origin: 100%;
      transform-origin: 100%; }
  
    .mfp-container {
      padding-left: 6px;
      padding-right: 6px; } }
  .mfp-ie7 .mfp-img {
    padding: 0; }
  .mfp-ie7 .mfp-bottom-bar {
    width: 600px;
    left: 50%;
    margin-left: -300px;
    margin-top: 5px;
    padding-bottom: 5px; }
  .mfp-ie7 .mfp-container {
    padding: 0; }
  .mfp-ie7 .mfp-content {
    padding-top: 44px; }
  .mfp-ie7 .mfp-close {
    top: 0;
    right: 0;
    padding-top: 0; }
  
  //Magnific overrides
  .mfp-image img{
    background: white;
  }
  .mfp-figure:after {
    background: white;
  }
  
  /*
   * Off Canvas navbar toggle right
   * --------------------------------------------------
   */
  
  @media screen and (max-width: 768px) {
    .row-offcanvas .collapsing {
    -webkit-transition: none 0;
      -moz-transition: none 0;
      transition: none 0;
    }
   .row-offcanvas .navbar {
    position: absolute;
    z-index: 2;
      right:0;
      height:100%;
      width:55px;
      border:0;
      background-color:transparent;
    }
    .row-offcanvas .navbar-toggle {
      margin-right: 5px;
      margin-left: 5px;
    }
    .row-offcanvas {
      position: relative;
    }
    .row-offcanvas-right.active .navbar {
    position: absolute;
    z-index: 2;
      right: -28.4%;
      width:40%;
      background-color:#eee;
      border:0 solid #ddd;
      border-left-width:1px;
    }
    .row-offcanvas-right.active {
      left: -30%;
    }
    .row-offcanvas-right.active .navbar-collapse {
      position: relative;
      width: 100%;
    }
    .row-offcanvas .content {
    /*width:calc(100% - 60px);*/
    }
  }
  </style>
</head>
<body>
<title>
Week 3, Lesson 6: Intro to vector with R
</title>
<div id="wrap">
<div class="container">
<div class="row row-offcanvas row-offcanvas-right">
<div class="contents col-xs-12 col-md-10">
<h1><a href="https://geoscripting-wur.github.io/">WUR Geoscripting</a> <img src="http://www.wageningenur.nl/upload/f9a0b5f2-15c5-4b84-9e14-20ef02f5e265_wur-logo.png" alt="WUR logo" /></h1>
<p>Authors: Jan Verbesselt, Sytze de Bruyn, LoÃ¯c Dutrieux, Valerio Avitabile</p>
<p>08 January, 2016</p>
<h1>Week 3, Lesson 6: Intro to vector with R</h1>
<h2>ToDo in the morning</h2>
<p>Go through the whole lesson and try to answer the questions below. We will address the questions in the lesson and discuss them.</p>
<h2>Objective of today</h2>
<p>Learn how to handle vector data</p>
<h2>Learning outcomes of today:</h2>
<p>In today's lecture, we will explore the basics of handling spatial vector data in R. There are several R packages for this purpose but we will focus on using <code>sp</code>, <code>rgdal</code>, <code>rgeos</code> and some related packages. At the end of the lecture, you should be able to:</p>
<ul>
<li>create point, line and polygon objects from scratch;</li>
<li>explore the structure of <code>sp</code> classes for spatial vector data;</li>
<li>plot spatial vector data;</li>
<li>transform between datums and map projections;</li>
<li>apply basic operations on vector data, such as buffering, intersection and area calculation;</li>
<li>write spatial vector data to a kml file;</li>
</ul>
<h1>Vector R basics</h1>
<h2>Some packages for working with spatial vector data in R</h2>
<p>The packages <code>sp</code> and <code>rgdal</code> are widely used throughout this course. Both packages not only provide functionality for raster data but also for vector data. The <code>sp</code> package provides classes for importing, manipulating and exporting spatial data in R, and methods</p>
<p>For example, <code>rgdal</code> includes bindings to parts of the <strong>OGR Simple Feature Library</strong> which provides access to a variety of vector file formats such as ESRI Shapefiles and kml. The OGR library is part of the widely used <strong>Geospatial Data Abstraction Library</strong> (GDAL). The GDAL library is the most useful freely-available library for reading and writing geospatial data. The GDAL library is well-documented (http://gdal.org/), but with a catch for R and Python programmers. The GDAL (and associated OGR) library and command line tools are all written in C and C++. Bindings are available that allow access from a variety of other languages including <code>R</code> and <code>Python</code> but the documentation is all written for the C++ version of the libraries. This can make reading the documentation rather challenging. Fortunaly, the <code>rgdal</code> package, providing GDAL bindings in R, is well documented with lots of examples. The same is valid for the Python libaries.</p>
<p>Similarly, <code>rgeos</code> is an interface to the powerful <strong>Geometry Engine Open Source (GEOS)</strong> library for all kinds of operations on geometries (buffering, overlaying, area calculations, etc.).</p>
<p>Thus, functionality that you commonly find in expensive GIS software is also available within R, using free but very powerful software libaries.</p>
<p>The possiblities are huge in this course we can only scratch the surface with some essentials which hopefully invite you to experiment further and use them in your research. Details can be found in the book Applied Spatial Data Analysis with R and several vignettes authored by Roger Bivand, Edzer Pebesma and Virgilio Gomez-Rubio. Owing to time constraints, this lecture cannot cover the related package <code>spacetime</code> with classes and methods for spatio-temporal data <span class="citation">[@Bivand:2013ux]</span>.</p>
<h2>Creating and manipulating geometries</h2>
<p>The package <code>sp</code> provides classes for spatial-only geometries, such as <code>SpatialPoints</code> (for points), and combinations of geometries and attribute data, such as a <code>SpatialPointsDataFrame</code>. The following data classes are available for spatial vector data <span class="citation">[@Edzer:2005ux]</span>:</p>
<table>
<caption>Overview of <em>sp</em> package classes spatial-only geometries.</caption>
<thead>
<tr class="header">
<th align="left">Geometry</th>
<th align="left">class</th>
<th align="left">attribute</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">points</td>
<td align="left"><em>SpatialPoints</em></td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">points</td>
<td align="left"><em>SpatialPointsDataFrame</em></td>
<td align="left">data.frame</td>
</tr>
<tr class="odd">
<td align="left">line</td>
<td align="left"><em>Line</em></td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">lines</td>
<td align="left"><em>Lines</em></td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">lines</td>
<td align="left"><em>SpatailLines</em></td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">lines</td>
<td align="left"><em>SpatialLinesDataFrame</em></td>
<td align="left">data.frame</td>
</tr>
<tr class="odd">
<td align="left">rings</td>
<td align="left"><em>Polygon</em></td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">rings</td>
<td align="left"><em>Polygons</em></td>
<td align="left">No</td>
</tr>
<tr class="odd">
<td align="left">rings</td>
<td align="left"><em>SpatailPolygons</em></td>
<td align="left">No</td>
</tr>
<tr class="even">
<td align="left">rings</td>
<td align="left"><em>SpatialPolygonsDataFrame</em></td>
<td align="left">data.frame</td>
</tr>
</tbody>
</table>
<p>We will go through a few examples of creating geometries from scratch to familiarize yourself with these classes.</p>
<p>First, start Google Earth on your computer and make a note of the longitude and latitude of two points in Wageningen that are relevant to you. Use a decimal degree notation with at least 4 digits after the decimal point. To change the settings in Google Earth click <em>Tools | Options</em> and change the Show lat/Long setting on the 3D View Tab.</p>
<h3>Points: SpatialPoints, SpatialPointsDataFrame</h3>
<p>The example below shows how you can create spatial point objects from these coordinates. Type <code>?function name</code> (e.g. <code>?cbind</code>) for finding help on the functions used.</p>
<strong>Question:</strong> See ?CRS and have a look at the help.
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># load the sp and rgdal packages
library(sp)</code></pre>
<button class="warning R toggle btn btn-xs btn-warning">
<span class="glyphicon glyphicon-chevron-down"></span> R warning
</button>
<pre style=""><code class="warning r">## Warning: package 'sp' was built under R version 3.2.2
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">library(rgdal)</code></pre>
<button class="warning R toggle btn btn-xs btn-warning">
<span class="glyphicon glyphicon-chevron-down"></span> R warning
</button>
<pre style=""><code class="warning r">## Warning: package 'rgdal' was built under R version 3.2.2
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># coordinates of two points identified in Google Earth, for example:
pnt1_xy <- cbind(5.6660, 51.9872)   # enter your own coordinates
pnt2_xy <- cbind(5.6643, 51.9668)   # enter your own coordinates

# combine coordinates in single matrix
coords <- rbind(pnt1_xy, pnt2_xy)

# make spatial points object
prj_string_WGS <- CRS("+proj=longlat +datum=WGS84")
mypoints <- SpatialPoints(coords, proj4string=prj_string_WGS)</code></pre>
</div>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># inspect object
class(mypoints)
str(mypoints)</code></pre>
</div>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># create and display some attribute data and store in a data frame
mydata <- data.frame(cbind(id = c(1,2), 
                Name = c("my first point", 
                         "my second point")))

# make spatial points data frame
mypointsdf <- SpatialPointsDataFrame(
  coords, data = mydata, 
  proj4string=prj_string_WGS)</code></pre>
</div>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">class(mypointsdf) # inspect and plot object
names(mypointsdf)
str(mypointsdf)</code></pre>
</div>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">spplot(mypointsdf, zcol="Name", col.regions = c("red", "blue"), 
       xlim = bbox(mypointsdf)[1, ]+c(-0.01,0.01), 
       ylim = bbox(mypointsdf)[2, ]+c(-0.01,0.01),
       scales= list(draw = TRUE))</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,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iAgtJNODGIOI0EIyPYgxiAgtJNODGIOI0EIyPYgxiAgtJNODGIOI0EIyPYgxiAgtJNODGIOI0NCZi6a5mLft5t1teWl70zTT8srudeuri/n6Vffqxezg/RFjEBEaOXP7cV7+smpe9IdfTsqdVy/vun/9frv5df3TdT38yciZm5+vmkm7/WX7aTh8ebhP16/vVpPhEX+9nO0P3/Ses/YzTsmTyIWr7pHe3bbdHb58qv8w7T4BvLzr37y+7v4MqI/4E9EzV9P94YvltPuE3//hXg7frib18CciZ5ajHzziu8/wm7fz7hP+7ou9dfkjvqmHPw06c9F/Gd8ffvP+rrw46z/hD8cuh9+8qYc/TUimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkimBzEGEaGFZHoQYxARWkim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" /> </a>
</div>
</div>
</div>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">## play with the spplot function
## What is needed to make the following work?
spplot(mypointsdf, col.regions = c(1,2))</code></pre>
</div>
<p><strong>Question:</strong> What is the the difference between the objects mypoints and mypointsdf.</p>
<h3>Lines</h3>
<p>Now let us connect the two points by a straight line. First find information on the classes for lines that are available in <code>sp</code>. The goal is to create SpatialLinesDataFrame but we have to go through some other classes.</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># consult help on SpatialLines class
(simple_line <- Line(coords))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## An object of class "Line"
## Slot "coords":
##        [,1]    [,2]
## [1,] 5.6660 51.9872
## [2,] 5.6643 51.9668
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">(lines_obj <- Lines(list(simple_line), "1"))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## An object of class "Lines"
## Slot "Lines":
## [[1]]
## An object of class "Line"
## Slot "coords":
##        [,1]    [,2]
## [1,] 5.6660 51.9872
## [2,] 5.6643 51.9668
## 
## 
## 
## Slot "ID":
## [1] "1"
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">(spatlines <- SpatialLines(list(lines_obj), proj4string=prj_string_WGS))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## An object of class "SpatialLines"
## Slot "lines":
## [[1]]
## An object of class "Lines"
## Slot "Lines":
## [[1]]
## An object of class "Line"
## Slot "coords":
##        [,1]    [,2]
## [1,] 5.6660 51.9872
## [2,] 5.6643 51.9668
## 
## 
## 
## Slot "ID":
## [1] "1"
## 
## 
## 
## Slot "bbox":
##       min     max
## x  5.6643  5.6660
## y 51.9668 51.9872
## 
## Slot "proj4string":
## CRS arguments:
##  +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">(line_data <- data.frame(Name = "straight line", row.names="1"))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">##            Name
## 1 straight line
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">(mylinesdf <- SpatialLinesDataFrame(spatlines, line_data))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## An object of class "SpatialLinesDataFrame"
## Slot "data":
##            Name
## 1 straight line
## 
## Slot "lines":
## [[1]]
## An object of class "Lines"
## Slot "Lines":
## [[1]]
## An object of class "Line"
## Slot "coords":
##        [,1]    [,2]
## [1,] 5.6660 51.9872
## [2,] 5.6643 51.9668
## 
## 
## 
## Slot "ID":
## [1] "1"
## 
## 
## 
## Slot "bbox":
##       min     max
## x  5.6643  5.6660
## y 51.9668 51.9872
## 
## Slot "proj4string":
## CRS arguments:
##  +proj=longlat +datum=WGS84 +ellps=WGS84 +towgs84=0,0,0
</code></pre>
</div>
<p><strong>Question:</strong> What is the difference between Line and Lines?</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">class(mylinesdf)
str(mylinesdf)</code></pre>
</div>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">spplot(mylinesdf, col.regions = "blue", 
       xlim = bbox(mypointsdf)[1, ]+c(-0.01,0.01), 
       ylim = bbox(mypointsdf)[2, ]+c(-0.01,0.01),
       scales= list(draw = TRUE))</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,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" /> </a>
</div>
</div>
</div>
<p><em>Try to understand the above code and its results by studying help.</em> <em>Try to add the points together with the lines on the same map</em></p>
<h3>Writing and reading spatial vector data using OGR</h3>
<p>What now follows is a brief intermezzo before we continue with the classes for polygons. Let us first export the objects created as kml files that can be displayed in Google Earth. We will use the <code>OGR</code> functionality available through the package <code>rgdal</code>.</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">library(rgdal)
# write to kml ; below we assume a subdirectory data within the current 
# working directory.
dir.create("data", showWarnings = FALSE) 
writeOGR(mypointsdf, file.path("data","mypointsGE.kml"), 
       "mypointsGE", driver="KML", overwrite_layer=TRUE)
writeOGR(mylinesdf, file.path("data","mylinesGE.kml"), 
       "mylinesGE", driver="KML", overwrite_layer=TRUE)</code></pre>
</div>
<p>Check (in Google Earth) whether the attribute data were written to the kml output.</p>
<p>The function <code>readOGR</code> allows reading OGR compatible data into a suitable Spatial vector object. Similar to <code>writeOGR</code>, the function requires entries for the arguments <code>dsn</code> (data source name) and <code>layer</code> (layer name). The interpretation of these enties vary by driver. Please study details in the help file.</p>
<p>Digitize a path (e.g. a bicycle route) between the two points of interest you selected earlier in Google Earth. This can be achieved using the <code>Add Path</code> functionality of Google Earth (see <a href="https://support.google.com/earth/answer/148072?hl=en">here</a> for more info. Save the path in the data folder within the working directory under the name <code>route.kml</code>. We will read this file into a spatial lines object and add it to the already existing <code>SpatialLinesDataFrame</code> object.</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">dsn = file.path("data","route.kml")
ogrListLayers(dsn) ## to find out what the layers are
myroute <- readOGR(dsn, layer = ogrListLayers(dsn))</code></pre>
</div>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># put both in single data frame
proj4string(myroute) <- prj_string_WGS</code></pre>
<button class="warning R toggle btn btn-xs btn-warning">
<span class="glyphicon glyphicon-chevron-down"></span> R warning
</button>
<pre style=""><code class="warning r">## Warning in `proj4string<-`(`*tmp*`, value = <S4 object of class structure("CRS", package = "sp")>): A new CRS was assigned to an object with an existing CRS:
## +proj=longlat +ellps=WGS84 +towgs84=0,0,0,0,0,0,0 +no_defs
## without reprojecting.
## For reprojection, use function spTransform in package rgdal
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">names(myroute)</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## [1] "Name"        "Description"
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">myroute$Description <- NULL # delete Description
mylinesdf <- rbind(mylinesdf, myroute)</code></pre>
</div>
<p>Try to understand the above code and results. Feel free to display the data and export to Google Earth.</p>
<h3>Transformation of coordinate system</h3>
<p>Transformations between coordinate systems are crucial to many GIS applications. The <strong>Keyhole Markup Language (kml)</strong> used by Google Earth uses latitude and longitude in a polar WGS84 coordinate system (i.e. geographic coordinates). However, in some of the examples below we will use metric distances (i.e. carthographic coordinates).There are two types of coordinate systems that you need to recognise: <strong>projected coordinate systems</strong> and <strong>unprojected coordinates systems</strong></p>
<p>One of the challenges of working with geo-spatial data is that geodetic locations (points on the Earth surface) are mapped into a two-dimensional cartesian plane using a cartographic projection. Projected coordinates are coordinates that refer to a point on a two-dimensional map that <em>represents</em> the surface of the Earth (i.e. <strong>projected coordinate system</strong>). Latitude and Longitude values are an example of an <strong>unprojected coordinate system</strong>. These are coordinates that directly refer to a point on the Earth's surface. One way to deal with this is by transforming the data to a planar coordinate system. In <code>R</code> this can be achieved via bindings to the <strong>PROJ.4 - Cartographic Projections Library</strong> (http://trac.osgeo.org/proj/), which are available in <code>rgdal</code>.</p>
<p>Central to spatial data in the <code>sp</code> package is that they have a coordinate reference system, which is coded in object of <code>CRS</code> class. Central to operations on different spatial data sets is that their coordinate reference system is compatible (i.e., identical). This CRS can be a character string describing a reference system in a way understood by the <code>PROJ.4</code> projection library, or a (character) missing value. An interface to the <code>PROJ.4</code> library is available only if the R package <code>rgdal</code> is present.</p>
<p>We will transform our spatial data to the Dutch grid (Rijksdriehoekstelsel), often referred to as RD. Please note that:</p>
<ul>
<li>some widely spread definitions of the Dutch grid (<strong>EPSG: 28992</strong>) are incomplete (see e.g. http://www.spatialreference.org are search for the EPSG number);</li>
<li>the transformation used below is approximate. Details can be found at http://nl.wikipedia.org/wiki/Rijksdriehoekscoordinaten.</li>
<li>The PROJ.4 details can be found here: http://www.spatialreference.org/ref/epsg/28992/proj4/</li>
</ul>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># define CRS object for RD projection
prj_string_RD <- CRS("+proj=sterea +lat_0=52.15616055555555 +lon_0=5.38763888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel +towgs84=565.2369,50.0087,465.658,-0.406857330322398,0.350732676542563,-1.8703473836068,4.0812 +units=m +no_defs")

# perform the coordinate transformation from WGS84 to RD
mylinesRD <- spTransform(mylinesdf, prj_string_RD)</code></pre>
</div>
<p>You can always plot the line using the basic plot command</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">plot(mylinesRD, col = c("red", "blue"))
box()</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANgAAADYCAMAAAC+/t3fAAAADFBMVEUAAAAAAP//AAD///9DpfB4AAAACXBIWXMAAAsSAAALEgHS3X78AAACCElEQVR4nO3cy1LDMBAFUez8/z/zXCRgFUFzE0+L7hUbaThlQ+zElZfLor2c/Qs8KmG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWFHa8/tgbDC2nrC4luP2wpD751+IqzIawjb30nbVpR1hL2pPmyF2V1hnz+UZC1hXy0LK8lawyoyYfGth13BCjJh8a2HXcPmZd1h0zJh8a2H3cJmZf1g31zrwiZlANicTFh861E/YVMyYfGtRx3AZmQE2LbmEZtiAWDrXFLdXtwvdHWfuR0Tlt96VOY+sztspTvo/wFb9lQU9tfp/rvPrRVWmn4ubK2Pkf4BbK1PNEMHTFh+60GhM1FYfutBmYchGsOqT4o1hc2/iXPn9JNggQf7WsISDyz2g2310/CO6c+GhVS/T38ybDv+sOUB059+xIQVpwsLrV0WdtmE1aYLS60VVpwuLLZ2zWvFi7Dq9KfDdmG16cJSa/fUH5mw+NbHCStOF5Zau6deooXFtz5uT71j2g2Wen1uB0vdjrWDxRI2sfWqXy3TOmG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYLWG0hNESRksYrVd1aBz2imPT6AAAAABJRU5ErkJggg==" title="" alt="" style="display: block; margin: auto;" /></a>
</div>
</div>
</div>
<p>Now that the geometries are projected to a planar coordinate system the length can be computed using a function from the package rgeos.</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># use rgeos for computing the length of lines 
library(rgeos)</code></pre>
<button class="warning R toggle btn btn-xs btn-warning">
<span class="glyphicon glyphicon-chevron-down"></span> R warning
</button>
<pre style=""><code class="warning r">## Warning: package 'rgeos' was built under R version 3.2.2
</code></pre>
<button class="message R toggle btn btn-xs btn-info">
<span class="glyphicon glyphicon-chevron-down"></span> R message
</button>
<pre style=""><code class="message r">## rgeos version: 0.3-15, (SVN revision 515)
##  GEOS runtime version: 3.4.2-CAPI-1.8.2 r3921 
##  Linking to sp version: 1.2-1 
##  Polygon checking: TRUE
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">(mylinesdf$length <- gLength(mylinesRD, byid=T))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">##        1        0 
## 2272.656 3201.050
</code></pre>
</div>
<p>Feel free to export the updated lines to Google Earth or to inspect the contents of the <code>data</code> slot of the object <code>mylinesdf</code></p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">mylinesdf@data
#or
data.frame(mylinesdf)</code></pre>
</div>
<h3>Polygons</h3>
<h4>Polygons with the <code>sp</code> package</h4>
<p>We now continue with <code>sp</code> classes for polygon objects. The idea is to illustrate the classes; the data are meaningless. Let us create overlapping circles around the points you defined earlier.</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># perform the coordinate transformation from WGS84 (i.e. not a projection) to RD (projected)"
# this step is necessary to be able to measure objectives in 2D (e.g. meters)
(mypointsRD <- spTransform(mypointsdf, prj_string_RD))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">##            coordinates id            Name
## 1   (174151, 444348.4)  1  my first point
## 2 (174042.9, 442078.3)  2 my second point
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">pnt1_rd <- coordinates(mypointsRD)[1,]
pnt2_rd <- coordinates(mypointsRD)[2,]

# make circles around points, with radius equal to distance between points
# define a series of angles going from 0 to 2pi
ang <- pi*0:200/100
circle1x <- pnt1_rd[1] + cos(ang) * mylinesdf$length[1]
circle1y <- pnt1_rd[2] + sin(ang) * mylinesdf$length[1]
circle2x <- pnt2_rd[1] + cos(ang) * mylinesdf$length[1]
circle2y <- pnt2_rd[2] + sin(ang) * mylinesdf$length[1] 
c1 <- cbind(circle1x, circle1y)
c2 <- cbind(circle2x, circle2y)</code></pre>
</div>
<p>You can plot everything again using basic R plot commands:</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">plot(c2, pch = 19, cex = 0.2, col = "red", ylim = range(circle1y, circle2y))
points(c1, pch = 19, cex = 0.2, col = "blue")
points(mypointsRD, pch = 3, col= "darkgreen")</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,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" title="" alt="" style="display: block; margin: auto;" /></a>
</div>
</div>
</div>
<p>Now, we create subsequently</p>
<ul>
<li>polygons</li>
<li>SpatialPolygons</li>
<li>SpatialPolygonsDataFrame</li>
</ul>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r"># Iterate through some steps to create SpatialPolygonsDataFrame object
circle1 <- Polygons(list(Polygon(cbind(circle1x, circle1y))),"1")
circle2 <- Polygons(list(Polygon(cbind(circle2x, circle2y))),"2")
spcircles <- SpatialPolygons(list(circle1, circle2), proj4string=prj_string_RD)
circledat <- data.frame(mypointsRD@data, row.names=c("1", "2"))
circlesdf <- SpatialPolygonsDataFrame(spcircles, circledat)</code></pre>
</div>
<p>Similar results can be obtained using the function gBuffer of the package rgeos, as demonstrated below. Notice the use of two overlay functions from the package <code>rgeos</code>.</p>
<p>The final results can be plotted using basic R plotting commands:</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">plot(circlesdf, col = c("gray60", "gray40"))
plot(mypointsRD, add = TRUE, col="red", pch=19, cex=1.5)
plot(mylinesRD, add = TRUE, col = c("green", "yellow"), lwd=1.5)
box()</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,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" title="plot example of final results" alt="plot example of final results" style="display: block; margin: auto;" /></a>
</div>
</div>
</div>
<p>Here is an example of a plot of the results which employs a few more advanced options of <code>spplot</code>.</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">spplot(circlesdf, zcol="Name", col.regions=c("gray60", "gray40"), 
       sp.layout=list(list("sp.points", mypointsRD, col="red", pch=19, cex=1.5), 
                      list("sp.lines", mylinesRD, lwd=1.5)))</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,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" title="spplot example" alt="spplot example" style="display: block; margin: auto;" /></a>
</div>
</div>
</div>
<p>Try to understand how <code>spplot</code> works by breaking it down in simple steps e.g.</p>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">spplot(circlesdf, zcol="Name", col.regions=c("gray60", "gray40"))</code></pre>
</div>
<p><strong>Question:</strong> Which plotting options do you prefer? E.g <code>spplot</code> or <code>plot</code></p>
<h4>Polygon operations with <code>rgeos</code> (buffer, intersect, difference)</h4>
<div class="row">
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">library(rgeos)
## Expand the given geometry to include the area within the specified width with specific styling options.
buffpoint <- gBuffer(mypointsRD[1,], width=mylinesdf$length[1], quadsegs=2)
mydiff <- gDifference(circlesdf[1,], buffpoint)

plot(circlesdf[1,], col = "red")
plot(buffpoint, add = TRUE, lty = 3, lwd = 2, col = "blue")</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,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" title="" alt="" style="display: block; margin: auto;" /></a>
</div>
</div>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">gArea(mydiff) ## what is the area of the difference?</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## [1] 1614821
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">plot(mydiff, col = "red")</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAACVBMVEUAAAD/AAD///9nGWQeAAAACXBIWXMAAAsSAAALEgHS3X78AAAFcUlEQVR4nO2d6ZbaOhAGxX3/h74nswTDEBVBvcik6ldO5tBfu6ZZLGvM+E+mjO4GdkdBgIIABQEKAhQEKAhQEKAgQEGAggAFAQoCFAQoCFAQoCBAQYCCAAUBCgIUBCgIUBCgIEBBgIIABQEKAhQEKAhQEKAgQEGAggAFAQoCFAQoCFAQoCBAQYCCAAUBCgIUBCgIUBCgIEBBgIIABQEKAhQEKAhQEKAgQEGAggAFAQoCFAQoCNhW0DjQ2kdn+GM+pVwulw8zv/7VqWkvQd9qPuyM639+/0+DpX0EXd18D8/xZ9cfFEvaRdBBzg899z8vVbSBoHEzO5c/jcjtgJVJahd0MzowHXdjVtJ7s6BbPXzMg56K8R3mR0zC7/T8/YPyFTUKevkJMypfsfsELQ1CnaI2QatHeHxPC2/umJNZfBJ7/OT3co1RYKhH0Ah6elzPS4IaexCRVnmS+eN0a6XWyFXUICj6t56rqOH0OP5j8NcYpRxLtaDrQk9G3fCy5YKS9HyUHjnmwytO01JPMVPO8UsF5Z+AxweUrj1VhEWHFAoqWuM6raCTrgGWCRq555THpNCguq5POqtFbY/kRYm7sMCsohfO7FWb+7S4sDJBpZ8nAuNqLp2UDtA5BVWf0oQFlny4LR6gswmq9xNpKL/zvLUsCI3JfGNBMaH5l247/ASO0DsLColNX8Hq8RM3Qm8tKCI4e29E/sXzWfJJBDVe3g64dBvQyqR62wCdSVDXDpuY8Ny9NY0DpKCi9NS9R61+gkbo7QWt5ie23+0nZoTeX9BiB4l7Ldr9hIyQgqhEUCsPKisIKvf7iWgi7Qh2GKD9BXX7CWhDQVQgrJX7wgqCwlv4We8j6xg2GaC9Be3gZ7kTBdHD4zq5raugedlt/Kzu9FAQPTqukZuy+/hZ3PX6bwhaaCZN0D5+1rpRED02sI9jWQVB2Z38LLWjIHpoYBv5ZV9GQYCCgP0E7WVow9cgBUFZPwdBWQVBWQVBWc/moexegrZcD9rG0K4rigqa193G0J5XNRSEdRUEdXe6Nq+gCbtuXtjF0N77gxQ0K6wgKOwuV6qsIKi8wQgF9PAPCFprQUFUIqiVB5Uv7Yb2/nuxDUboFIL8m9VJbQVB7d4R2v/v5r2xABbvF7Qcntt9+91fFATZ69HJzTffgUpBkBwQnN27N3mj+k0jdJr7KHaN0MkElRs60b1ce0ZIQU+ExmQWdN5gKHBnQEXj9RsZAje4lTRebSgyr6bv4i2LkXFlggoNhf46itouHaETfrdP7c7yM347VKWh2KR3FBQadNJXhllObEzhu2/Nl9Sd+FsyKxTFJ1SfAiR/U2/807j4NPvjE2NOZtLXYfcs1CQcR9aaQfli6NcKY8r3zWccTMNq8feehrDz7dRNEn3X9GLGaIzf1QI6exSQUxZCL5dLyBj9tpP1yt8k6GBoYYxGgZ4uQYdf/auHd6yQugsssfY8eEnRjZ7cPU6ZxSH6VtHznYw6Pa2C7hQ9e6jrz86/oncn/A9F1M4o1tMu6F7R/JhfflKu9FcRAi08N0b1w/MZW5Qzh8fopZerkNbKkuaM6YDcvm2V3t5qF0G/+MNLTOm7+s+mivPmjE+OMq4n/6N4dr5aKk98gvGAtl66gs+CggAFAQoCFAQoCFAQoCBAQYCCAAUBCgIUBCgIUBCgIEBBgIIABQEKAhQEKAhQEKAgQEGAggAFAQoCFAQoCFAQoCBAQYCCAAUBCgIUBCgIUBCgIEBBgIIABQEKAhQEKAhQEKAgQEGAggAFAQoCFAQoCFAQoCBAQYCCAAUBCgIUBCgIUBCgIEBBgIIABQEKAhQEKAhQEKAgQEGAggAFAQoCFAQoCFAQ8D+C2n0p7LRw2AAAAABJRU5ErkJggg==" title="" alt="" style="display: block; margin: auto;" /></a>
</div>
</div>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">myintersection <- gIntersection(circlesdf[1,], buffpoint)

plot(myintersection, col="blue")</code></pre>
<div class="row">
<div class="col-md-offset-3 col-md-6">
<a href="#" class="thumbnail"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAMAAAAjXV6yAAAACVBMVEUAAAAAAP////9d2MkjAAAACXBIWXMAAAsSAAALEgHS3X78AAAEnUlEQVR4nO3dAY7iSgwA0ZD7H3pHYRkxDLgG4m67paoD2M5TWH3+rsS2W9hWfUD3BIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEggSCBIIEgnoDbVv5feUHBG3b5XKpJmoLtB08l4Oo8simQN86N6O6S8o2Bz3wlBL1A9qe8BR+0roBvdCpe41aAb16eSpfo0ZAqFPyGnUB4pen6DXqAfSGzuzXqAPQ2zwzicqB3vlsPRLNOL76m86nOtNeo9KvOSd5prxGhV9yzuvcjIaeOXJ4sDaN50o07jFqvt9k6tyMRt06aG60Mp9nINH0rzaDeK5EA55m8hebcTo3o/STswdGu0bzjCCaCjTB50so+ejcceGqKT7ZQgLR1anTwk2TfJKFBKKzM4fFmwSKF03zyRUSiO5OnBXumeiTKiQQHZ43Klwz1SdTSCC6PG1SvEageMtkn0Qhgej0rEHhkuk+eUIC0e1Jc+IlAsU7CnzShASi43PGhCtKfLKEBKLrU6bEKwSKNxT5JAkJROdnDAkXlPnkCAlE9yfMCOcX+qQICUQPcH5EPF+geHypT4aQQPQECQrB9GKfBCGB6BEyHF5Pr/ZpDlTvc15IIHqGFIkXs6txjk4+oUD0EDkWz2dX2xz1Berhc1ZIIHqKJI0nk6thvjv1jALRY2R5/BpczXLXmYcUiJ4jTeRxcLXKXR2BOvmcEhKIHiTP5MfYapKHPn9MgehJElXux1aLPNQOqJlQvz+DBOLB1Sh3dfzvIIFwcLXKXS2BGgn1/DYvEI+uhvlf1/+jKBDPrqY56vu3GgLh7Gqbo8ZALYQ6/928QDy9mqf5vw8SCKdX+3QHKhfq/q9cBeL5i/sIhA9wfkQ8XyBasLaPQHh/wgzYsLSPQHh+xhBYsbKPQHh9ypR4hUC0Y2EfgfD4nDGwZF0fgfD2pDnxEoFoy7I+AuHpWYNgzao+AuHlaZPiNQLRnkV9BMLD80bBojV9BMK7E2fBpiV9BMKzM4fFmwSiVSv6CIRXp06DXQv6+CuZeHTuONrm76ziPn+pl1f6W8+41F8Lx7X+3jxvziIaqLNXAuW8RiNfnuuRY8fj+nNEo3X2cqAzr9Hwl+d634Qd1EdEU3T2HkAfEM3i6QL03idtzmfrdti8VdQfiWbq7K2A/vIaTX15rjdN3keFRNN19n5Ar1+j+S/P9ZyKpdQTohqdvSnQL6IynrZA95+0os/W7Y7C3dRBVKqz9wY6XqPyE6oP6J5AkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQJBAkECQQNA/l1tMWurHAmAAAAAASUVORK5CYII=" title="" alt="" style="display: block; margin: auto;" /></a>
</div>
</div>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">gArea(myintersection)</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## [1] 14608733
</code></pre>
<button class="source R toggle btn btn-xs btn-primary">
<span class="glyphicon glyphicon-chevron-down"></span> R source
</button>
<pre style=""><code class="source r">print(paste("The difference in area =", round(100 * gArea(mydiff) / 
                                             gArea(myintersection),2), "%"))</code></pre>
<button class="output R toggle btn btn-xs btn-success">
<span class="glyphicon glyphicon-chevron-down"></span> R output
</button>
<pre style=""><code class="output r">## [1] "The difference in area = 11.05 %"
</code></pre>
</div>
<ul>
<li><strong>Question:</strong> What happens if you change <code>quadsegs</code> to a higher number?</li>
<li><strong>Question:</strong> Do you understand the script? What is the difference between <code>gIntersection</code> and <code>gDifference</code>?</li>
</ul>
<h1>Today's summary</h1>
<p>We learned about:</p>
<ul>
<li>The spatial classes of the <strong>sp</strong> package</li>
<li>How to read/write data and change data format with <strong>rgdal</strong> package (<code>writeOGR()</code> and <code>writeOGR()</code>)</li>
<li>Visualize spatial vector data in R and in GoogleEarth</li>
<li>How to perform simple operations on Geometries in R using the <strong>rgeos</strong> package</li>
</ul>
<h1>Excercise of today</h1>
<p>First, download and unzip the following shape files manually from this <a href="http://www.mapcruzin.com/free-netherlands-arcgis-maps-shapefiles.htm">website</a>:</p>
<ul>
<li>Places</li>
<li>Railways</li>
</ul>
<p>Second, create a clear and documented script as part of a new Rstudio Project (set-up as descriped in lesson 4) that:</p>
<ul>
<li>Selects the &quot;industrial&quot; (<code>type == &quot;industrial&quot;</code>) railways</li>
<li>Buffers the &quot;industrial&quot; railways with a buffer of 1000m (hint: <code>gBuffer</code> with <code>byid=TRUE</code>)</li>
<li>Find the place (i.e. a city) that <code>intersects</code> with this buffer.</li>
<li>Create a <code>plot</code> that shows the buffer, the points, and the name of the city</li>
<li>write down the name of the city and the <code>population</code> of that city as one comment at the end of the script.</li>
</ul>
<p>Think about project structure and use of git!</p>
<p>Bonus (optional!): if you can also download and unzip this within the script.</p>
<h2>Submit</h2>
<p>Put your project on your gitHub account as a new repository post the <strong><em>clone url</em></strong> in the forum before tommorow (1030)</p>
<h2>More info</h2>
About projections and code: https://www.nceas.ucsb.edu/scicomp/recipes/projections
</div>
</div>
</div>
<div id="push">

</div>
<div id="footer">
<div class="container">
<p class="text-muted" id="credit">
Styled with <a href="https://github.com/jimhester/knitrBootstrap">knitrBootstrap</a>
</p>
</div>
</div>
<link rel="stylesheet" id="theme" href="https://netdna.bootstrapcdn.com/bootswatch/3.0.0/cosmo/bootstrap.min.css" media="screen"></link><link rel="stylesheet" id="highlight" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/7.3/styles/default.min.css" media="screen"></link>
</div>
</body>
</html>
